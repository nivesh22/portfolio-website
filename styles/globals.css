@tailwind base;
@tailwind components;
@tailwind utilities;
@import "./animations.css";

/* ------------------------------
   BASE TYPOGRAPHY + GLOBAL SETUP
---------------------------------*/
@layer base {
  html { scroll-behavior: smooth; }

  :root { 
    @apply bg-bg-0 text-text-0; 
  }

  body { 
    @apply bg-bg-0 text-text-0 antialiased; 
    font-family: var(--font-inter), ui-sans-serif, system-ui, -apple-system; 
  }

  h1, h2, h3, h4 { 
    font-family: var(--font-sofia), ui-sans-serif, system-ui, -apple-system;
    letter-spacing: -0.01em; 
  }

  code, kbd, pre {
    font-family: var(--font-plex), ui-monospace, SFMono-Regular, Menlo, Monaco;
  }

  a { 
    @apply text-primary hover:opacity-90;
    focus:outline-none;
    focus:ring-2;
    focus:ring-primary;
  }
}

/* ------------------------------
   GLASS CARDS + SHADOW UTILS
---------------------------------*/
.glass {
  background: var(--card-bg, var(--glass-bg, rgba(255, 255, 255, 0.06)));
  backdrop-filter: blur(16px);
  border: 1px solid var(--glass-border, rgba(255, 255, 255, 0.1));
  box-shadow: var(--shadow-card, none);
}

.shadow-hover {
  box-shadow: var(--shadow-card, none);
  transition: box-shadow 160ms ease;
}
.shadow-hover:hover {
  box-shadow: var(--shadow-hover, var(--shadow-card, none));
}

.shadow-primary {
  box-shadow: none;
  transition: box-shadow 160ms ease;
}
.shadow-primary:hover {
  box-shadow: var(--shadow-primary, none);
}

.container-max {
  @apply mx-auto px-4;
  max-width: 1200px;
}

/* ------------------------------
   SPIN + DASH ANIMATIONS
---------------------------------*/
@keyframes spin-slow { to { transform: rotate(360deg); } }
.spin-slow {
  animation: spin-slow var(--anim-spin-slow, 6s) linear infinite;
  transform-origin: center;
}

@keyframes spin-slower { to { transform: rotate(360deg); } }
.spin-slower {
  animation: spin-slower var(--anim-spin-slower, 12s) linear infinite;
  transform-origin: center;
}

@keyframes dash { to { stroke-dashoffset: -14; } }
.dash {
  stroke-dasharray: 4 3;
  animation: dash var(--anim-dash, 2.5s) linear infinite;
}

/* ------------------------------
   LINK CTA (NO LAYOUT SHIFT)
---------------------------------*/
.link-cta {
  position: relative;
  color: var(--primary, currentColor);
}

.link-cta::before {
  content: "";
  position: absolute;
  inset: -6px -8px;
  border-radius: 8px;
  background: var(--link-hover-bg, rgba(255,255,255,0.06));
  border: 1px solid var(--link-hover-border, rgba(255,255,255,0.1));
  opacity: 0;
  transition: opacity .2s ease;
}

.link-cta:hover::before {
  opacity: 1;
}

/* ------------------------------
   FIX LEGACY TAILWIND COLORS
---------------------------------*/
.bg-white\/5        { background-color: var(--layer-05, rgba(255,255,255,0.05)) !important; }
.bg-white\/10       { background-color: var(--layer-10, rgba(255,255,255,0.1)) !important; }
.border-white\/10   { border-color: var(--glass-border, rgba(255,255,255,0.1)) !important; }
.text-cyan-400      { color: var(--primary, #00e5ff) !important; }
.hover\:bg-white\/10:hover { background-color: var(--link-hover-bg, rgba(255,255,255,0.06)) !important; }
.glass.border       { border-color: var(--glass-border, rgba(255,255,255,0.1)) !important; }
.bg-accent\/80      { background-color: var(--btn-bg, var(--accent)) !important; }
.bg-accent\/90      { background-color: var(--btn-bg-hover, var(--accent)) !important; }
.border-primary\/50 { border-color: var(--btn-border, rgba(0,0,0,0.35)) !important; }
.hover\:bg-primary\/10:hover { background-color: var(--btn-bg-hover, var(--btn-bg)) !important; }

/* ------------------------------
   AMBIENT BACKGROUND (GRADIENT)
---------------------------------*/
.ambient-bg {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  overflow: hidden;

  background-color: var(--ambient-base, var(--bg-0));
  background-image:
    radial-gradient(60% 60% at 16% 18%, var(--ambient-blob-1, rgba(126, 173, 255, 0.09)) 0%, transparent 55%),
    radial-gradient(58% 58% at 86% 18%, var(--ambient-blob-2, rgba(122, 212, 208, 0.08)) 0%, transparent 55%),
    radial-gradient(60% 60% at 18% 82%, var(--ambient-blob-3, rgba(138, 188, 145, 0.08)) 0%, transparent 55%),
    radial-gradient(58% 58% at 86% 84%, var(--ambient-blob-4, rgba(162, 174, 192, 0.07)) 0%, transparent 55%),
    radial-gradient(80% 80% at 50% 50%, var(--ambient-blob-5, rgba(255, 255, 255, 0.04)) 0%, transparent 70%);

  background-repeat: no-repeat;
  background-size: 120% 120%, 124% 124%, 122% 122%, 126% 126%, 160% 160%;
  animation: ambient-drift 32s ease-in-out infinite alternate;
  will-change: background-position;
  transition: background-color 200ms ease;
  filter: saturate(1.02);
}

/* ------------------------------
   AMBIENT SYMBOLS LAYER (MOVING)
---------------------------------*/
.ambient-bg::after {
  content: "";
  position: absolute;
  inset: -12%;
  pointer-events: none;
  mix-blend-mode: soft-light;

  color: var(--text-1, rgba(200, 214, 230, 0.5)); /* follows theme muted text */

  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='260' height='260' fill='currentColor' fill-opacity='0.12'%3E%3Ctext x='26' y='44' font-size='16'%3E%CE%A0%3C/text%3E%3Ctext x='178' y='86' font-size='12'%3E%CF%83%3C/text%3E%3Ctext x='108' y='26' font-size='14'%3E%2B%3C/text%3E%3Ctext x='48' y='148' font-size='16'%3E%CE%A3%3C/text%3E%3Ctext x='190' y='168' font-size='14'%3E%CE%BC%3C/text%3E%3Ctext x='120' y='188' font-size='12'%3E%CF%80%3C/text%3E%3Ctext x='28' y='216' font-size='12'%3E%3D%3C/text%3E%3Ctext x='148' y='132' font-size='16'%3E%2D%3C/text%3E%3Ctext x='96' y='114' font-size='12'%3E%CE%B4%3C/text%3E%3Ctext x='204' y='38' font-size='12'%3E%CF%86%3C/text%3E%3C/svg%3E");

  background-repeat: repeat;
  background-size: 260px 280px;

  opacity: 0.16;
  animation: ambient-symbols 60s linear infinite;
}

/* diagonal slow movement + breathing opacity */
@keyframes ambient-symbols {
  0% {
    background-position: 0 0;
    opacity: 0.14;
  }
  33% {
    background-position: -90px -80px;
    opacity: 0.18;
  }
  66% {
    background-position: -180px -150px;
    opacity: 0.22;
  }
  100% {
    background-position: -270px -220px;
    opacity: 0.14;
  }
}

/* ambient gradient drifting */
@keyframes ambient-drift {
  0% {
    background-position: 10% 16%, 90% 16%, 12% 86%, 90% 86%, 50% 50%;
  }
  50% {
    background-position: 15% 19%, 85% 19%, 17% 83%, 85% 83%, 51% 49%;
  }
  100% {
    background-position: 20% 22%, 80% 22%, 22% 80%, 80% 80%, 50% 50%;
  }
}

/* Respect user motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .ambient-bg,
    .ambient-bg::after {
      animation: none !important;
      background-attachment: scroll !important;
      opacity: 0.6;
    }
  }
